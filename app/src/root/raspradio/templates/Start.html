<html>
<head>

<link rel= "stylesheet" type= "text/css" href= "{{ url_for('static',filename='styles/raspradio.css') }}">
<link rel= "stylesheet" type= "text/css" href= "{{ url_for('static',filename='styles/checkbox_slider.css') }}">
<script>
function validateForm() {
    var hour = document.forms["timeForm"]["hour"].value;
    var minute = document.forms["timeForm"]["minute"].value;
    var isValid = true;
    if (isNaN(hour) || isNaN(minute)) {
	isValid = false;
    }
    if (!(isInt(hour) && isInt(minute))) {
	isValid = false;
    }
    var hourInt = parseInt(hour);
    if (hourInt > 23 || hourInt < 0) {
	isValid = false;
    }
    var minuteInt = parseInt(minute);
    if (minuteInt > 59 || minuteInt < 0) {
	isValid = false;
    }
    if (!isValid) {
	alert("Bitte Uhrzeit eingeben, z.B. 23:45");
        return false;
    }
    return true;
} 

function isInt(value) {
  var x = parseFloat(value);
  if (value.indexOf(".") !== -1) {
    return false;
  }
  if (value.indexOf(",") !== -1) {
    return false;
  }
  return !isNaN(value) && (x | 0) === x;
}


</script>


</head>
<body bgcolor="#E6E6FA">
    <div class="main-div">
        <a href="alarm">aktualisieren</a>

	{% if aktivewecker %}
        <h1>Aktive Wecker</h1>
        {% endif %}
	{% for wecker in aktivewecker %}
		<form>
		  <input type="hidden" name="deleteme" value="{{wecker.alarmid}}">
		<p>
		  <input type="text" readonly value="{{wecker.hour}}:{{wecker.minute}}" maxlength="2" size="2"> 
		  <button class="disable-button" type="submit" value="-">abschalten</button>
                  <br />({{wecker.streamname}})
		</p>
		</form>

        {% endfor %}
	<form name="timeForm" action="/alarm/app/v1.0/alarm" onsubmit="return validateForm()">
	  <h1>Neuer Weck-Timer</h1>
          <p>
	  <input type="text" name="hour" value="00" maxlength="2" size="2">
	  <input type="text" name="minute" value="00" maxlength="2" size="2">
	  <input type="submit" class="button" value="OK">
         <br />
	<select name="stream">
		{% for stream in streams %}
	             <option value="{{stream.name}}">{{stream.name}}</option>
		{% endfor %}
	</select>
       <br />
        <label for="fadein">Fade-In</label>
<label class="switch">
	<input type="checkBox" id="fadein" name="fadein" value="Yes" checked> 
  <span class="slider"></span>
</label>
        <input type="text" name="fadeinvalue" value="0" size="2" disabled/> 

	<br />
  
        <label>Duration</label> <input type="text" name="duration" value="30" size="4" /> 
 		</p>
	</form> 
    </div>
    <a href="streams">Streams</a>
</body>

</html>
